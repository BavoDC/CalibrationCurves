% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/MIXC.R
\name{MIXC}
\alias{MIXC}
\title{Internal function for the Mixed-Effects Model Calibration Curve (MIXC)}
\usage{
MIXC(
  data = NULL,
  preds,
  y,
  cluster,
  grid_length = 100,
  method = c("slope", "intercept"),
  plot = TRUE,
  cluster_curves = FALSE,
  nsims_pi = 10000,
  CI = TRUE,
  CI_method = ""
)
}
\arguments{
\item{data}{Optional data frame containing the columns for `preds`, `y`, and `cluster`.
If provided, `preds`, `y`, and `cluster` should be column names (unquoted).
Default is `NULL`.}

\item{preds}{A numeric vector of predicted probabilities.}

\item{y}{A numeric vector of binary outcomes (0 or 1).}

\item{cluster}{A factor or character vector of cluster identifiers.}

\item{grid_length}{Integer; number of points for the prediction grid. Default is `100`.}

\item{method}{Character; type of mixed-effects model: `"intercept"` (random intercept)
or `"slope"` (random slope). Default is `"slope"`.}

\item{plot}{Logical; whether to generate a calibration plot. Default is `TRUE`.}

\item{cluster_curves}{Logical; whether to include cluster-specific curves in the plot.
Default is `FALSE`.}

\item{nsims_pi}{Integer; number of simulations for prediction intervals. Default is `10000`.}

\item{CI}{Logical; whether to calculate confidence intervals. Default is `TRUE`.}

\item{CI_method}{Character; method for confidence intervals: `"delta"` or empty string.
Default is `""`.}
}
\value{
A list containing:
\describe{
  \item{model}{The fitted mixed-effects model object}
  \item{cluster_data}{Data frame with calibration data for each cluster}
  \item{plot_data}{Data frame with calibration data for the average cluster}
  \item{observed_data}{Data frame with calibration data for individual patients}
  \item{plot}{A `ggplot2` object if `plot = TRUE`, otherwise `NULL`}
}
}
\description{
Generates calibration plots for mixed-effects models, assessing the agreement between
predicted probabilities and observed binary outcomes while accounting for clustering.
Supports random intercept and random slope models with confidence and prediction intervals.
}
\details{
This function fits mixed-effects logistic regression models to account for clustering
and generates calibration curves with optional confidence and prediction intervals.
}
